(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("dotenv"),n=require("jsmodbus");var r=e.n(n);const i=require("net");var a=e.n(i);const u=require("cron");var s=e.n(u),o=[{value:{lowproducttime:0},fc:3,unitid:1,address:3e3,quantity:1},{value:{robaguptime:0},fc:3,unitid:1,address:3004,quantity:1},{value:{interlocktime:0},fc:3,unitid:1,address:3008,quantity:1},{value:{runtime:0},fc:3,unitid:1,address:3010,quantity:1},{value:{pausedtime:0},fc:3,unitid:1,address:3012,quantity:1},{value:{faulttime:0},fc:3,unitid:1,address:3014,quantity:1},{value:{outoffilmtime:0},fc:3,unitid:1,address:3016,quantity:1}],c=[{value:{targetweight:0},fc:3,unitid:1,address:5010,quantity:1},{value:{baglength:0},fc:3,unitid:1,address:5014,quantity:1},{value:{bagsperminute:0},fc:3,unitid:1,address:5016,quantity:1},{value:{topconehigh:0},fc:3,unitid:1,address:5032,quantity:1},{value:{topconelow:0},fc:3,unitid:1,address:5034,quantity:1},{value:{highlimitweight:0},fc:3,unitid:1,address:5048,quantity:1},{value:{sealtime:0},fc:3,unitid:1,address:5050,quantity:1},{value:{striplength:0},fc:3,unitid:1,address:5052,quantity:1},{value:{falltime:0},fc:3,unitid:1,address:5054,quantity:1},{value:{nominalweight:0},fc:3,unitid:1,address:5064,quantity:1},{value:{tne:0},fc:3,unitid:1,address:5066,quantity:1},{value:{fbdelay2:0},fc:3,unitid:1,address:5092,quantity:1},{value:{lvfdelay:0},fc:3,unitid:1,address:5094,quantity:1},{value:{wbdelay:0},fc:3,unitid:1,address:5098,quantity:1},{value:{wbopentime:0},fc:3,unitid:1,address:5100,quantity:1},{value:{fbopentime:0},fc:3,unitid:1,address:5104,quantity:1},{value:{staggerdelay:0},fc:3,unitid:1,address:5106,quantity:1},{value:{lowlowlimit:0},fc:3,unitid:1,address:5108,quantity:1},{value:{biasweight:0},fc:3,unitid:1,address:5110,quantity:1},{value:{striptime:0},fc:3,unitid:1,address:5112,quantity:1}];const l=require("https");var d=e.n(l);function f(e){return t=this,n=void 0,i=function(){var t,n,r;return function(e,t){var n,r,i,a,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){u.label=a[1];break}if(6===a[0]&&u.label<i[1]){u.label=i[1],i=a;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(a);break}i[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(i){switch(i.label){case 0:return t=JSON.stringify(e),n={method:"POST",hostname:"industrial.api.ubidots.com",path:"/api/v1.6/devices/"+process.env.DEVICE_LABEL,headers:{"X-Auth-Token":""+process.env.TOKEN,"x-ubidots-apikey":""+process.env.API_KEY,"Content-Type":"application/json"},maxRedirects:20},[4,(r=d().request(n,(function(e){var t=[];e.on("data",(function(e){return t.push(e)})),e.on("end",(function(){var e=Buffer.concat(t);console.log(e.toString()),console.log("\n")})),e.on("error",(function(e){return console.error(e)}))}))).write(t)];case 1:return i.sent(),r.end(),[2]}}))},new((r=void 0)||(r=Promise))((function(e,a){function u(e){try{o(i.next(e))}catch(e){a(e)}}function s(e){try{o(i.throw(e))}catch(e){a(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(u,s)}o((i=i.apply(t,n||[])).next())}));var t,n,r,i}var v=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function u(e){try{o(r.next(e))}catch(e){a(e)}}function s(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,s)}o((r=r.apply(e,t||[])).next())}))},y=function(e,t){var n,r,i,a,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){u.label=a[1];break}if(6===a[0]&&u.label<i[1]){u.label=i[1],i=a;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(a);break}i[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};t.config();var h=new function(){this.keys={lowproducttime:0,robaguptime:0,interlocktime:0,runtime:0,pausedtime:0,faulttime:0,outoffilmtime:0,fullbags:0,targetweight:0,baglength:0,bagsperminute:0,topconehigh:0,topconelow:0,shiftefficiency:0,highlimitweight:0,sealtime:0,striplength:0,falltime:0,nominalweight:0,tne:0,fbdelay2:0,lvfdelay:0,wbdelay:0,wbopentime:0,fbopentime:0,staggerdelay:0,lowlowlimit:0,biasweight:0,striptime:0}},p=new(a().Socket),b=new(r().client.TCP)(p,1),g={host:process.env.HOST,port:parseInt(process.env.MODBUS_PORT)};function w(e,t,n,r){var i=this;return new(s().CronJob)(e,(function(){return v(i,void 0,void 0,(function(){return y(this,(function(e){return[2,t(n)]}))}))}),null,!0,r)}function m(e){return v(this,void 0,void 0,(function(){var t,n,r,i,a,u;return y(this,(function(s){switch(s.label){case 0:t={},n=0,s.label=1;case 1:return n<e.length?(r=e[n],[4,b.readHoldingRegisters(r.address,1)]):[3,4];case 2:i=s.sent(),a=Object.keys(r.value)[0],u=i.response.body.values[0],h.keys[a]=u,t[a]=u,s.label=3;case 3:return n++,[3,1];case 4:return[4,f(t)];case 5:return s.sent(),[2,Promise.resolve()]}}))}))}!function(){try{p.on("connect",(function(){console.log("CONNECTED"),w("*/1 * * * * *",(function(){return function(e){return v(this,void 0,void 0,(function(){var t,n,r,i,a,u,s;return y(this,(function(o){switch(o.label){case 0:t={},n=0,o.label=1;case 1:return n<e.length?(r=e[n],[4,b.readHoldingRegisters(r.address,1)]):[3,4];case 2:i=o.sent(),a=Object.keys(r.value)[0],u=h.keys[a],s=i.response.body.values[0],u!==s&&(h.keys[a]=s,t[a]=s),o.label=3;case 3:return n++,[3,1];case 4:return[4,f(t)];case 5:return o.sent(),[2,Promise.resolve()]}}))}))}(c)}),c,process.env.TIMEZONE).start(),w("*/1 * * * * *",(function(){return m(o)}),o,process.env.TIMEZONE).start(),w("*/1 * * * * *",(function(){return m(o)}),o,process.env.TIMEZONE).start();var e=[{value:{shiftefficiency:0},fc:3,unitid:1,address:5036,quantity:1}];w("*/1 * * * * *",(function(){return function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(r){switch(r.label){case 0:return[4,b.readHoldingRegisters(e[0].address,1)];case 1:return t=r.sent(),n=t.response.body.values[0],h.keys.shiftefficiency=n,[4,f({shiftefficiency:n})];case 2:return r.sent(),[2,Promise.resolve()]}}))}))}(e)}),e,process.env.TIMEZONE).start();var t=[{value:{fullbags:0},fc:3,unitid:1,address:5e3,quantity:1}];w("*/1 * * * * *",(function(){return function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(r){switch(r.label){case 0:return[4,b.readHoldingRegisters(e[0].address,1)];case 1:return t=r.sent(),h.keys.fullbags,n=t.response.body.values[0],h.keys.fullbags=n,[4,f({fullbags:n})];case 2:return r.sent(),[2,Promise.resolve()]}}))}))}(t)}),t,process.env.TIMEZONE).start()})),p.connect(g)}catch(e){console.log(e)}}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pb3QtZmxvdy1nYXRld2F5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2lvdC1mbG93LWdhdGV3YXkvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vaW90LWZsb3ctZ2F0ZXdheS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vaW90LWZsb3ctZ2F0ZXdheS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2lvdC1mbG93LWdhdGV3YXkvZXh0ZXJuYWwgXCJkb3RlbnZcIiIsIndlYnBhY2s6Ly9pb3QtZmxvdy1nYXRld2F5L2V4dGVybmFsIFwianNtb2RidXNcIiIsIndlYnBhY2s6Ly9pb3QtZmxvdy1nYXRld2F5L2V4dGVybmFsIFwibmV0XCIiLCJ3ZWJwYWNrOi8vaW90LWZsb3ctZ2F0ZXdheS9leHRlcm5hbCBcImNyb25cIiIsIndlYnBhY2s6Ly9pb3QtZmxvdy1nYXRld2F5Ly4vc3JjL21vZGVscy9tb2RidXMvcGF5bG9hZC1kYXRhLnRzIiwid2VicGFjazovL2lvdC1mbG93LWdhdGV3YXkvZXh0ZXJuYWwgXCJodHRwc1wiIiwid2VicGFjazovL2lvdC1mbG93LWdhdGV3YXkvLi9zcmMvdWJpZG90cy1kYXRhLXNlbmRlci50cyIsIndlYnBhY2s6Ly9pb3QtZmxvdy1nYXRld2F5Ly4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly9pb3QtZmxvdy1nYXRld2F5Ly4vc3JjL21vZGVscy9tb2RidXMvbW9kYnVzLXZhcmlhYmxlLW1hcHBlci50cyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInJlcXVpcmUiLCJ0aW1lQ2hhbmdlRGF0YSIsInZhbHVlIiwibG93cHJvZHVjdHRpbWUiLCJmYyIsInVuaXRpZCIsImFkZHJlc3MiLCJxdWFudGl0eSIsInJvYmFndXB0aW1lIiwiaW50ZXJsb2NrdGltZSIsInJ1bnRpbWUiLCJwYXVzZWR0aW1lIiwiZmF1bHR0aW1lIiwib3V0b2ZmaWxtdGltZSIsImRhdGFVcG9uQ2hhbmdlIiwidGFyZ2V0d2VpZ2h0IiwiYmFnbGVuZ3RoIiwiYmFnc3Blcm1pbnV0ZSIsInRvcGNvbmVoaWdoIiwidG9wY29uZWxvdyIsImhpZ2hsaW1pdHdlaWdodCIsInNlYWx0aW1lIiwic3RyaXBsZW5ndGgiLCJmYWxsdGltZSIsIm5vbWluYWx3ZWlnaHQiLCJ0bmUiLCJmYmRlbGF5MiIsImx2ZmRlbGF5Iiwid2JkZWxheSIsIndib3BlbnRpbWUiLCJmYm9wZW50aW1lIiwic3RhZ2dlcmRlbGF5IiwibG93bG93bGltaXQiLCJiaWFzd2VpZ2h0Iiwic3RyaXB0aW1lIiwic2VuZE1vZGJ1c0RhdGFUb1ViaWRvdHMiLCJtb2RidXNQYXlsb2FkIiwicG9zdERhdGEiLCJKU09OIiwic3RyaW5naWZ5Iiwib3B0aW9ucyIsIm1ldGhvZCIsImhvc3RuYW1lIiwicGF0aCIsInByb2Nlc3MiLCJlbnYiLCJERVZJQ0VfTEFCRUwiLCJoZWFkZXJzIiwiVE9LRU4iLCJBUElfS0VZIiwibWF4UmVkaXJlY3RzIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiY2h1bmtzIiwib24iLCJjaHVuayIsInB1c2giLCJib2R5IiwiQnVmZmVyIiwiY29uY2F0IiwiY29uc29sZSIsImxvZyIsInRvU3RyaW5nIiwiZXJyb3IiLCJ3cml0ZSIsImVuZCIsInZhcmlhYmxlTWFwcGVyIiwia2V5cyIsImZ1bGxiYWdzIiwic2hpZnRlZmZpY2llbmN5Iiwic29ja2V0IiwiY2xpZW50IiwiaG9zdCIsIkhPU1QiLCJwb3J0IiwicGFyc2VJbnQiLCJNT0RCVVNfUE9SVCIsImNyZWF0ZUNyb25Kb2IiLCJjcm9uVGltZSIsImNyb25GdW5jdGlvbiIsImRhdGFBcnJheSIsInRpbWV6b25lIiwic2VuZERhdGEiLCJ2YXJpYWJsZXNUb1NlbmRUb0Nsb3VkIiwiaSIsImxlbmd0aCIsInBheWxvYWQiLCJyZWFkSG9sZGluZ1JlZ2lzdGVycyIsInJlZ2lzdGVyRGF0YSIsInZhcmlhYmxlS2V5IiwiY3VycmVudFZhbHVlIiwidmFsdWVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJwcmV2aW91c1ZhbHVlIiwic2VuZE9ubHlDaGFuZ2VkRGF0YSIsIlRJTUVaT05FIiwic3RhcnQiLCJzaGlmdEVmZmljaWVuY3lEYXRhIiwic2VuZFNoaWZ0RWZmaWNpZW5jeURhdGEiLCJmdWxsQmFnc0RhdGEiLCJzZW5kRnVsbEJhZ3NEYXRhIiwiY29ubmVjdCIsIm1haW4iXSwibWFwcGluZ3MiOiJtQkFDQSxJQUFJQSxFQUFzQixDQ0ExQixFQUF5QkMsSUFDeEIsSUFBSUMsRUFBU0QsR0FBVUEsRUFBT0UsV0FDN0IsSUFBTUYsRUFBZ0IsUUFDdEIsSUFBTUEsRUFFUCxPQURBRCxFQUFvQkksRUFBRUYsRUFBUSxDQUFFRyxFQUFHSCxJQUM1QkEsR0NMUixFQUF3QixDQUFDSSxFQUFTQyxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hQLEVBQW9CUyxFQUFFRixFQUFZQyxLQUFTUixFQUFvQlMsRUFBRUgsRUFBU0UsSUFDNUVFLE9BQU9DLGVBQWVMLEVBQVNFLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRSxFQUF3QixDQUFDTSxFQUFLQyxJQUFTTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxJQ0FqRixNQUFNLEVBQStCSSxRQUFRLFVDQXZDLEVBQStCQSxRQUFRLFksYUNBN0MsTUFBTSxFQUErQkEsUUFBUSxPLGFDQTdDLE1BQU0sRUFBK0JBLFFBQVEsUSxhQ3dCaENDLEVBQWtDLENBQzdDLENBQ0VDLE1BQU8sQ0FDTEMs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RSxTQUFVLEdBRVpoRSxHQUFJLEVBQ0pDLE9BQVEsRUFDUkMsUUFBUyxJQUNUQyxTQUFVLElBSWdCc0UsRUFFaEMsaUJBQ0EsV0FBTSxPQW9FVixTQUFnQ1MsRyxrR0FDVCxTQUFNZixFQUFPZ0IscUJBQXFCRCxFQUFRLEdBQUdoRixRQUFTLEksT0FZM0UsT0FaTWtGLEVBQWUsU0FFU3RCLEVBQWVDLEtBQWUsU0FDdER1QixFQUF1QkYsRUFBYXBDLFNBQVNLLEtBQUtrQyxPQUFPLEdBTy9EekIsRUFBZUMsS0FBZSxTQUFJdUIsRUFFbEMsR0FBTXZELEVBQXdCLENBQUVpQyxTQUFVc0IsSyxPQUUxQyxPQUZBLFNBRU8sQ0FBUCxFQUFPRSxRQUFRQyxrQkFuRlBRLENBQWlCRCxLQUNuQkEsRUFDQXhELFFBQVFDLElBQUltRCxVQUVHQyxXQUduQjNCLEVBQU9nQyxRQUFROUQsR0FDZixNQUFPdUIsR0FDUEgsUUFBUUMsSUFBSUUsSUF1RmhCd0MsSSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gbW9kdWxlWydkZWZhdWx0J10gOlxuXHRcdCgpID0+IG1vZHVsZTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJkb3RlbnZcIik7OyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwianNtb2RidXNcIik7OyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwibmV0XCIpOzsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcImNyb25cIik7OyIsImltcG9ydCB7IE1vZGJ1c1BheWxvYWQgfSBmcm9tIFwiLi9tb2RidXMtcGF5bG9hZFwiO1xuXG4vKiBUT0RPOiBEbyB0aGlzIG9uZSBtYW51YWxseSBmb3IgZnVsbCBiYWdzICovXG4vLyAge1xuLy8gICAgIHZhbHVlOiB7XG4vLyAgICAgICBmdWxsYmFnczogMCxcbi8vICAgICB9LFxuLy8gICAgIGZjOiAzLFxuLy8gICAgIHVuaXRpZDogMSxcbi8vICAgICBhZGRyZXNzOiA1MDAwLFxuLy8gICAgIHF1YW50aXR5OiAxLFxuLy8gICB9LFxuXG4vKiAgVE9ETzogRG8gdGhpcyBvbmUgbWFudWFsbHkgZm9yIHNoaWZ0IGVmZmljaWVuY3kgKi9cbi8vICB7XG4vLyAgICAgdmFsdWU6IHtcbi8vICAgICAgIHNoaWZ0ZWZmaWNpZW5jeTogMCxcbi8vICAgICB9LFxuLy8gICAgIGZjOiAzLFxuLy8gICAgIHVuaXRpZDogMSxcbi8vICAgICBhZGRyZXNzOiA1MDM2LFxuLy8gICAgIHF1YW50aXR5OiAxLFxuLy8gICB9LFxuXG5leHBvcnQgY29uc3QgdGltZUNoYW5nZURhdGE6IE1vZGJ1c1BheWxvYWRbXSA9IFtcbiAge1xuICAgIHZhbHVlOiB7XG4gICAgICBsb3dwcm9kdWN0dGltZTogMCxcbiAgICB9LFxuICAgIGZjOiAzLFxuICAgIHVuaXRpZDogMSxcbiAgICBhZGRyZXNzOiAzMDAwLFxuICAgIHF1YW50aXR5OiAxLFxuICB9LFxuICB7XG4gICAgdmFsdWU6IHtcbiAgICAgIHJvYmFndXB0aW1lOiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDMwMDQsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgaW50ZXJsb2NrdGltZTogMCxcbiAgICB9LFxuICAgIGZjOiAzLFxuICAgIHVuaXRpZDogMSxcbiAgICBhZGRyZXNzOiAzMDA4LFxuICAgIHF1YW50aXR5OiAxLFxuICB9LFxuICB7XG4gICAgdmFsdWU6IHtcbiAgICAgIHJ1bnRpbWU6IDAsXG4gICAgfSxcbiAgICBmYzogMyxcbiAgICB1bml0aWQ6IDEsXG4gICAgYWRkcmVzczogMzAxMCxcbiAgICBxdWFudGl0eTogMSxcbiAgfSxcbiAge1xuICAgIHZhbHVlOiB7XG4gICAgICBwYXVzZWR0aW1lOiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDMwMTIsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgZmF1bHR0aW1lOiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDMwMTQsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgb3V0b2ZmaWxtdGltZTogMCxcbiAgICB9LFxuICAgIGZjOiAzLFxuICAgIHVuaXRpZDogMSxcbiAgICBhZGRyZXNzOiAzMDE2LFxuICAgIHF1YW50aXR5OiAxLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGRhdGFVcG9uQ2hhbmdlOiBNb2RidXNQYXlsb2FkW10gPSBbXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgdGFyZ2V0d2VpZ2h0OiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDUwMTAsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgYmFnbGVuZ3RoOiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDUwMTQsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgYmFnc3Blcm1pbnV0ZTogMCxcbiAgICB9LFxuICAgIGZjOiAzLFxuICAgIHVuaXRpZDogMSxcbiAgICBhZGRyZXNzOiA1MDE2LFxuICAgIHF1YW50aXR5OiAxLFxuICB9LFxuICB7XG4gICAgdmFsdWU6IHtcbiAgICAgIHRvcGNvbmVoaWdoOiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDUwMzIsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgdG9wY29uZWxvdzogMCxcbiAgICB9LFxuICAgIGZjOiAzLFxuICAgIHVuaXRpZDogMSxcbiAgICBhZGRyZXNzOiA1MDM0LFxuICAgIHF1YW50aXR5OiAxLFxuICB9LFxuICB7XG4gICAgdmFsdWU6IHtcbiAgICAgIGhpZ2hsaW1pdHdlaWdodDogMCxcbiAgICB9LFxuICAgIGZjOiAzLFxuICAgIHVuaXRpZDogMSxcbiAgICBhZGRyZXNzOiA1MDQ4LFxuICAgIHF1YW50aXR5OiAxLFxuICB9LFxuICB7XG4gICAgdmFsdWU6IHtcbiAgICAgIHNlYWx0aW1lOiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDUwNTAsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgc3RyaXBsZW5ndGg6IDAsXG4gICAgfSxcbiAgICBmYzogMyxcbiAgICB1bml0aWQ6IDEsXG4gICAgYWRkcmVzczogNTA1MixcbiAgICBxdWFudGl0eTogMSxcbiAgfSxcbiAge1xuICAgIHZhbHVlOiB7XG4gICAgICBmYWxsdGltZTogMCxcbiAgICB9LFxuICAgIGZjOiAzLFxuICAgIHVuaXRpZDogMSxcbiAgICBhZGRyZXNzOiA1MDU0LFxuICAgIHF1YW50aXR5OiAxLFxuICB9LFxuICB7XG4gICAgdmFsdWU6IHtcbiAgICAgIG5vbWluYWx3ZWlnaHQ6IDAsXG4gICAgfSxcbiAgICBmYzogMyxcbiAgICB1bml0aWQ6IDEsXG4gICAgYWRkcmVzczogNTA2NCxcbiAgICBxdWFudGl0eTogMSxcbiAgfSxcbiAge1xuICAgIHZhbHVlOiB7XG4gICAgICB0bmU6IDAsXG4gICAgfSxcbiAgICBmYzogMyxcbiAgICB1bml0aWQ6IDEsXG4gICAgYWRkcmVzczogNTA2NixcbiAgICBxdWFudGl0eTogMSxcbiAgfSxcbiAge1xuICAgIHZhbHVlOiB7XG4gICAgICBmYmRlbGF5MjogMCxcbiAgICB9LFxuICAgIGZjOiAzLFxuICAgIHVuaXRpZDogMSxcbiAgICBhZGRyZXNzOiA1MDkyLFxuICAgIHF1YW50aXR5OiAxLFxuICB9LFxuICB7XG4gICAgdmFsdWU6IHtcbiAgICAgIGx2ZmRlbGF5OiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDUwOTQsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgd2JkZWxheTogMCxcbiAgICB9LFxuICAgIGZjOiAzLFxuICAgIHVuaXRpZDogMSxcbiAgICBhZGRyZXNzOiA1MDk4LFxuICAgIHF1YW50aXR5OiAxLFxuICB9LFxuICB7XG4gICAgdmFsdWU6IHtcbiAgICAgIHdib3BlbnRpbWU6IDAsXG4gICAgfSxcbiAgICBmYzogMyxcbiAgICB1bml0aWQ6IDEsXG4gICAgYWRkcmVzczogNTEwMCxcbiAgICBxdWFudGl0eTogMSxcbiAgfSxcbiAge1xuICAgIHZhbHVlOiB7XG4gICAgICBmYm9wZW50aW1lOiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDUxMDQsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgc3RhZ2dlcmRlbGF5OiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDUxMDYsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgbG93bG93bGltaXQ6IDAsXG4gICAgfSxcbiAgICBmYzogMyxcbiAgICB1bml0aWQ6IDEsXG4gICAgYWRkcmVzczogNTEwOCxcbiAgICBxdWFudGl0eTogMSxcbiAgfSxcbiAge1xuICAgIHZhbHVlOiB7XG4gICAgICBiaWFzd2VpZ2h0OiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDUxMTAsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG4gIHtcbiAgICB2YWx1ZToge1xuICAgICAgc3RyaXB0aW1lOiAwLFxuICAgIH0sXG4gICAgZmM6IDMsXG4gICAgdW5pdGlkOiAxLFxuICAgIGFkZHJlc3M6IDUxMTIsXG4gICAgcXVhbnRpdHk6IDEsXG4gIH0sXG5dO1xuXG5cbiIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiaHR0cHNcIik7OyIsImltcG9ydCBodHRwcyBmcm9tIFwiaHR0cHNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRNb2RidXNEYXRhVG9VYmlkb3RzKG1vZGJ1c1BheWxvYWQ6IHtcbiAgW2tleTogc3RyaW5nXTogbnVtYmVyO1xufSk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBwb3N0RGF0YSA9IEpTT04uc3RyaW5naWZ5KG1vZGJ1c1BheWxvYWQpO1xuXG4gIGNvbnN0IG9wdGlvbnM6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBob3N0bmFtZTogXCJpbmR1c3RyaWFsLmFwaS51Ymlkb3RzLmNvbVwiLFxuICAgIHBhdGg6IGAvYXBpL3YxLjYvZGV2aWNlcy8ke3Byb2Nlc3MuZW52LkRFVklDRV9MQUJFTH1gLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiWC1BdXRoLVRva2VuXCI6IGAke3Byb2Nlc3MuZW52LlRPS0VOfWAsXG4gICAgICBcIngtdWJpZG90cy1hcGlrZXlcIjogYCR7cHJvY2Vzcy5lbnYuQVBJX0tFWX1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfSxcbiAgICBtYXhSZWRpcmVjdHM6IDIwLFxuICB9O1xuXG4gIGNvbnN0IHJlcXVlc3Q6IGFueSA9IGh0dHBzLnJlcXVlc3Qob3B0aW9ucywgKHJlc3BvbnNlOiBhbnkpID0+IHtcbiAgICBjb25zdCBjaHVua3M6IGFueVtdID0gW107XG5cbiAgICByZXNwb25zZS5vbihcImRhdGFcIiwgKGNodW5rOiBhbnkpID0+IGNodW5rcy5wdXNoKGNodW5rKSk7XG5cbiAgICByZXNwb25zZS5vbihcImVuZFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBib2R5ID0gQnVmZmVyLmNvbmNhdChjaHVua3MpO1xuXHRcdFx0Y29uc29sZS5sb2coYm9keS50b1N0cmluZygpKTtcblx0XHRcdGNvbnNvbGUubG9nKFwiXFxuXCIpO1xuICAgIH0pO1xuXG5cdFx0cmVzcG9uc2Uub24oXCJlcnJvclwiLCAoZXJyb3I6IGFueSkgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xuXHR9KTtcblx0XG5cdC8vIGNvbnN0IHJlcXVlc3Q6IGFueSA9IGh0dHBzLnJlcXVlc3Qob3B0aW9ucyk7XG5cbiAgYXdhaXQgcmVxdWVzdC53cml0ZShwb3N0RGF0YSk7XG5cbiAgcmVxdWVzdC5lbmQoKTtcbn1cbiIsImltcG9ydCAqIGFzIGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5cbmltcG9ydCBqc21vZGJ1cyBmcm9tIFwianNtb2RidXNcIjtcbmltcG9ydCBuZXQgZnJvbSBcIm5ldFwiO1xuLy8gdmFyIENyb25Kb2IgPSByZXF1aXJlKFwiY3JvblwiKS5Dcm9uSm9iO1xuaW1wb3J0IGNyb24gZnJvbSBcImNyb25cIjtcblxuaW1wb3J0IHsgZGF0YVVwb25DaGFuZ2UsIHRpbWVDaGFuZ2VEYXRhIH0gZnJvbSBcIi4vbW9kZWxzL21vZGJ1cy9wYXlsb2FkLWRhdGFcIjtcbmltcG9ydCB7IE1vZGJ1c1BheWxvYWQgfSBmcm9tIFwiLi9tb2RlbHMvbW9kYnVzL21vZGJ1cy1wYXlsb2FkXCI7XG5pbXBvcnQgeyBNb2RidXNWYXJpYWJsZU1hcHBlciB9IGZyb20gXCIuL21vZGVscy9tb2RidXMvbW9kYnVzLXZhcmlhYmxlLW1hcHBlclwiO1xuaW1wb3J0IHsgc2VuZE1vZGJ1c0RhdGFUb1ViaWRvdHMgfSBmcm9tIFwiLi91Ymlkb3RzLWRhdGEtc2VuZGVyXCI7XG5cbmRvdGVudi5jb25maWcoKTtcblxuY29uc3QgdmFyaWFibGVNYXBwZXIgPSBuZXcgTW9kYnVzVmFyaWFibGVNYXBwZXIoKTtcblxuY29uc3Qgc29ja2V0ID0gbmV3IG5ldC5Tb2NrZXQoKTtcbmNvbnN0IHVuaXRJRDogbnVtYmVyID0gMTtcbmNvbnN0IGNsaWVudCA9IG5ldyBqc21vZGJ1cy5jbGllbnQuVENQKHNvY2tldCwgdW5pdElEKTtcbmNvbnN0IG9wdGlvbnM6IG5ldC5Tb2NrZXRDb25uZWN0T3B0cyA9IHtcbiAgaG9zdDogcHJvY2Vzcy5lbnYuSE9TVCxcbiAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuTU9EQlVTX1BPUlQpLFxufTtcblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgdHJ5IHtcbiAgICBzb2NrZXQub24oXCJjb25uZWN0XCIsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ09OTkVDVEVEXCIpO1xuXG4gICAgICAvL0VWRVJZIDE1IE1JTlVURVNcbiAgICAgIGNvbnN0IGRhdGFVcG9uQ2hhbmdlZFNjaGVkdWxlOiBhbnkgPSBjcmVhdGVDcm9uSm9iKFxuXHRcdFx0XHQvL1wiMCAqLzE1ICogKiAqICpcIixcblx0XHRcdFx0XCIqLzEgKiAqICogKiAqXCIsXG5cdFx0XHRcdCgpID0+IHNlbmRPbmx5Q2hhbmdlZERhdGEoZGF0YVVwb25DaGFuZ2UpLFxuICAgICAgICBkYXRhVXBvbkNoYW5nZSxcbiAgICAgICAgcHJvY2Vzcy5lbnYuVElNRVpPTkVcbiAgICAgICk7XG4gICAgICBkYXRhVXBvbkNoYW5nZWRTY2hlZHVsZS5zdGFydCgpO1xuXG4gICAgICAvL1NUQVJUUyAwNjo1MEFNXG4gICAgICBjb25zdCB0aW1lQ2hhbmdlRGF0YVNjaGVkdWxlQU06IGFueSA9IGNyZWF0ZUNyb25Kb2IoXG5cdFx0XHRcdC8vXCIwIDUwIDA2ICogKiAqXCIsXG5cdFx0XHRcdFwiKi8xICogKiAqICogKlwiLFxuXHRcdFx0XHQoKSA9PiBzZW5kRGF0YSh0aW1lQ2hhbmdlRGF0YSksXG4gICAgICAgIHRpbWVDaGFuZ2VEYXRhLFxuICAgICAgICBwcm9jZXNzLmVudi5USU1FWk9ORVxuICAgICAgKTtcblx0XHRcdHRpbWVDaGFuZ2VEYXRhU2NoZWR1bGVBTS5zdGFydCgpO1xuXHRcdFx0XG4gICAgICAvL1NUQVJUUyAwNjo1MFBNXG4gICAgICBjb25zdCB0aW1lQ2hhbmdlRGF0YVNjaGVkdWxlUE06IGFueSA9IGNyZWF0ZUNyb25Kb2IoXG5cdFx0XHRcdC8vXCIwIDUwIDE4ICogKiAqXCIsXG5cdFx0XHRcdFwiKi8xICogKiAqICogKlwiLFxuXHRcdFx0XHQoKSA9PiBzZW5kRGF0YSh0aW1lQ2hhbmdlRGF0YSksXG4gICAgICAgIHRpbWVDaGFuZ2VEYXRhLFxuICAgICAgICBwcm9jZXNzLmVudi5USU1FWk9ORVxuICAgICAgKTtcbiAgICAgIHRpbWVDaGFuZ2VEYXRhU2NoZWR1bGVQTS5zdGFydCgpO1xuXG4gICAgICAvL1NFTkQgU0hJRlQgRUZGSUNJRU5DWSBEQVRBXG4gICAgICBjb25zdCBzaGlmdEVmZmljaWVuY3lEYXRhOiBNb2RidXNQYXlsb2FkW10gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgc2hpZnRlZmZpY2llbmN5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmM6IDMsXG4gICAgICAgICAgdW5pdGlkOiAxLFxuICAgICAgICAgIGFkZHJlc3M6IDUwMzYsXG4gICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBzaGlmdEVmZmljaWVuY3lTY2hlZHVsZTogYW55ID0gY3JlYXRlQ3JvbkpvYihcblx0XHRcdFx0Ly9cIjAgMCAqLzEgKiAqICpcIixcblx0XHRcdFx0XCIqLzEgKiAqICogKiAqXCIsXG5cdFx0XHRcdCgpID0+IHNlbmRTaGlmdEVmZmljaWVuY3lEYXRhKHNoaWZ0RWZmaWNpZW5jeURhdGEpLFxuICAgICAgICBzaGlmdEVmZmljaWVuY3lEYXRhLFxuICAgICAgICBwcm9jZXNzLmVudi5USU1FWk9ORVxuICAgICAgKTtcbiAgICAgIHNoaWZ0RWZmaWNpZW5jeVNjaGVkdWxlLnN0YXJ0KCk7XG5cbiAgICAgIC8vU0VORCBGVUxMIEJBR1MgREFUQVxuICAgICAgY29uc3QgZnVsbEJhZ3NEYXRhOiBNb2RidXNQYXlsb2FkW10gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgZnVsbGJhZ3M6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmYzogMyxcbiAgICAgICAgICB1bml0aWQ6IDEsXG4gICAgICAgICAgYWRkcmVzczogNTAwMCxcbiAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGZ1bGxCYWdzU2NoZWR1bGU6IGFueSA9IGNyZWF0ZUNyb25Kb2IoXG5cdFx0XHRcdC8vXCIwIDAgKi8xICogKiAqXCIsXG5cdFx0XHRcdFwiKi8xICogKiAqICogKlwiLFxuXHRcdFx0XHQoKSA9PiBzZW5kRnVsbEJhZ3NEYXRhKGZ1bGxCYWdzRGF0YSksXG4gICAgICAgIGZ1bGxCYWdzRGF0YSxcbiAgICAgICAgcHJvY2Vzcy5lbnYuVElNRVpPTkVcbiAgICAgICk7XG4gICAgICBmdWxsQmFnc1NjaGVkdWxlLnN0YXJ0KCk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQuY29ubmVjdChvcHRpb25zKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQ3JvbkpvYihcblx0Y3JvblRpbWU6IHN0cmluZyxcblx0Y3JvbkZ1bmN0aW9uOiAoZGF0YUFycmF5OiBNb2RidXNQYXlsb2FkW10pID0+IFByb21pc2U8dm9pZD4sXG4gIGRhdGFBcnJheTogTW9kYnVzUGF5bG9hZFtdLFxuICB0aW1lem9uZTogc3RyaW5nXG4pOiBhbnkge1xuICAvLyBzZXR0aW5nIHVwIGpvYiBzY2hlZHVsZVxuICByZXR1cm4gbmV3IGNyb24uQ3JvbkpvYihcbiAgICBjcm9uVGltZSxcbiAgICBhc3luYyAoKSA9PiBjcm9uRnVuY3Rpb24oZGF0YUFycmF5KSxcbiAgICBudWxsLFxuICAgIHRydWUsXG4gICAgdGltZXpvbmVcbiAgKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2VuZE9ubHlDaGFuZ2VkRGF0YShkYXRhQXJyYXk6IE1vZGJ1c1BheWxvYWRbXSk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB2YXJpYWJsZXNUb1NlbmRUb0Nsb3VkOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwYXlsb2FkOiBNb2RidXNQYXlsb2FkID0gZGF0YUFycmF5W2ldO1xuICAgIGNvbnN0IHJlZ2lzdGVyRGF0YSA9IGF3YWl0IGNsaWVudC5yZWFkSG9sZGluZ1JlZ2lzdGVycyhwYXlsb2FkLmFkZHJlc3MsIDEpO1xuXG4gICAgY29uc3QgdmFyaWFibGVLZXkgPSBPYmplY3Qua2V5cyhwYXlsb2FkLnZhbHVlKVswXTtcbiAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gdmFyaWFibGVNYXBwZXIua2V5c1t2YXJpYWJsZUtleV07XG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gcmVnaXN0ZXJEYXRhLnJlc3BvbnNlLmJvZHkudmFsdWVzWzBdO1xuXG4gICAgaWYgKHByZXZpb3VzVmFsdWUgIT09IGN1cnJlbnRWYWx1ZSkge1xuICAgICAgdmFyaWFibGVNYXBwZXIua2V5c1t2YXJpYWJsZUtleV0gPSBjdXJyZW50VmFsdWU7XG4gICAgICB2YXJpYWJsZXNUb1NlbmRUb0Nsb3VkW3ZhcmlhYmxlS2V5XSA9IGN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gIH1cblx0YXdhaXQgc2VuZE1vZGJ1c0RhdGFUb1ViaWRvdHModmFyaWFibGVzVG9TZW5kVG9DbG91ZCk7XG5cdFxuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNlbmREYXRhKGRhdGFBcnJheTogTW9kYnVzUGF5bG9hZFtdKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHZhcmlhYmxlc1RvU2VuZFRvQ2xvdWQ6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFBcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHBheWxvYWQ6IE1vZGJ1c1BheWxvYWQgPSBkYXRhQXJyYXlbaV07XG4gICAgY29uc3QgcmVnaXN0ZXJEYXRhID0gYXdhaXQgY2xpZW50LnJlYWRIb2xkaW5nUmVnaXN0ZXJzKHBheWxvYWQuYWRkcmVzcywgMSk7XG5cbiAgICBjb25zdCB2YXJpYWJsZUtleSA9IE9iamVjdC5rZXlzKHBheWxvYWQudmFsdWUpWzBdO1xuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHJlZ2lzdGVyRGF0YS5yZXNwb25zZS5ib2R5LnZhbHVlc1swXTtcblxuICAgIHZhcmlhYmxlTWFwcGVyLmtleXNbdmFyaWFibGVLZXldID0gY3VycmVudFZhbHVlO1xuICAgIHZhcmlhYmxlc1RvU2VuZFRvQ2xvdWRbdmFyaWFibGVLZXldID0gY3VycmVudFZhbHVlO1xuICB9XG5cdGF3YWl0IHNlbmRNb2RidXNEYXRhVG9VYmlkb3RzKHZhcmlhYmxlc1RvU2VuZFRvQ2xvdWQpO1xuXHRcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzZW5kRnVsbEJhZ3NEYXRhKHBheWxvYWQ6IE1vZGJ1c1BheWxvYWRbXSk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCByZWdpc3RlckRhdGEgPSBhd2FpdCBjbGllbnQucmVhZEhvbGRpbmdSZWdpc3RlcnMocGF5bG9hZFswXS5hZGRyZXNzLCAxKTtcblxuICBjb25zdCBwcmV2aW91c1ZhbHVlOiBudW1iZXIgPSB2YXJpYWJsZU1hcHBlci5rZXlzW1wiZnVsbGJhZ3NcIl07XG4gIGNvbnN0IGN1cnJlbnRWYWx1ZTogbnVtYmVyID0gcmVnaXN0ZXJEYXRhLnJlc3BvbnNlLmJvZHkudmFsdWVzWzBdO1xuICBsZXQgY3VycmVudEhvdXJUb3RhbDogbnVtYmVyID0gY3VycmVudFZhbHVlIC0gcHJldmlvdXNWYWx1ZTtcblxuICBpZiAoY3VycmVudEhvdXJUb3RhbCA8PSAwKSB7XG4gICAgY3VycmVudEhvdXJUb3RhbCA9IGN1cnJlbnRWYWx1ZTtcbiAgfVxuXG4gIHZhcmlhYmxlTWFwcGVyLmtleXNbXCJmdWxsYmFnc1wiXSA9IGN1cnJlbnRWYWx1ZTtcblxuICBhd2FpdCBzZW5kTW9kYnVzRGF0YVRvVWJpZG90cyh7IGZ1bGxiYWdzOiBjdXJyZW50VmFsdWUgfSk7XG5cbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzZW5kU2hpZnRFZmZpY2llbmN5RGF0YShcbiAgcGF5bG9hZDogTW9kYnVzUGF5bG9hZFtdXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgcmVnaXN0ZXJEYXRhID0gYXdhaXQgY2xpZW50LnJlYWRIb2xkaW5nUmVnaXN0ZXJzKHBheWxvYWRbMF0uYWRkcmVzcywgMSk7XG4gIGNvbnN0IGN1cnJlbnRWYWx1ZTogbnVtYmVyID0gcmVnaXN0ZXJEYXRhLnJlc3BvbnNlLmJvZHkudmFsdWVzWzBdO1xuICB2YXJpYWJsZU1hcHBlci5rZXlzW1wic2hpZnRlZmZpY2llbmN5XCJdID0gY3VycmVudFZhbHVlO1xuXHRhd2FpdCBzZW5kTW9kYnVzRGF0YVRvVWJpZG90cyh7IHNoaWZ0ZWZmaWNpZW5jeTogY3VycmVudFZhbHVlIH0pO1xuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG5cbm1haW4oKTtcbiIsImV4cG9ydCBjbGFzcyBNb2RidXNWYXJpYWJsZU1hcHBlciB7XG4gIHB1YmxpYyBrZXlzOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge1xuICAgIGxvd3Byb2R1Y3R0aW1lOiAwLFxuICAgIHJvYmFndXB0aW1lOiAwLFxuICAgIGludGVybG9ja3RpbWU6IDAsXG4gICAgcnVudGltZTogMCxcbiAgICBwYXVzZWR0aW1lOiAwLFxuICAgIGZhdWx0dGltZTogMCxcbiAgICBvdXRvZmZpbG10aW1lOiAwLFxuICAgIGZ1bGxiYWdzOiAwLFxuICAgIHRhcmdldHdlaWdodDogMCxcbiAgICBiYWdsZW5ndGg6IDAsXG4gICAgYmFnc3Blcm1pbnV0ZTogMCxcbiAgICB0b3Bjb25laGlnaDogMCxcbiAgICB0b3Bjb25lbG93OiAwLFxuICAgIHNoaWZ0ZWZmaWNpZW5jeTogMCxcbiAgICBoaWdobGltaXR3ZWlnaHQ6IDAsXG4gICAgc2VhbHRpbWU6IDAsXG4gICAgc3RyaXBsZW5ndGg6IDAsXG4gICAgZmFsbHRpbWU6IDAsXG4gICAgbm9taW5hbHdlaWdodDogMCxcbiAgICB0bmU6IDAsXG4gICAgZmJkZWxheTI6IDAsXG4gICAgbHZmZGVsYXk6IDAsXG4gICAgd2JkZWxheTogMCxcbiAgICB3Ym9wZW50aW1lOiAwLFxuICAgIGZib3BlbnRpbWU6IDAsXG4gICAgc3RhZ2dlcmRlbGF5OiAwLFxuICAgIGxvd2xvd2xpbWl0OiAwLFxuICAgIGJpYXN3ZWlnaHQ6IDAsXG4gICAgc3RyaXB0aW1lOiAwLFxuICB9O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==